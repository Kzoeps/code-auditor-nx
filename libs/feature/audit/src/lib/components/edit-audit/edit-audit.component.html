<ng-container *ngIf="(auditStoreState$ | async) as auditStoreState">
  <span *ngIf="auditStoreState.auditState as audit">
    <h1>Editing Audit with Auditee: {{audit.auditee.teamName | titlecase}}</h1>
    <hr/>
    <form style="display: flex; flex-direction: column" [formGroup]="editAuditForm">
      <span *ngIf="errorMessage" style="color: red">
        {{errorMessage}}
      </span>
      <span *ngIf="auditStoreState.teamsState as teams" style="display: flex; flex-direction: column">
        <mat-form-field appearance="outline">
        <mat-label>
          Auditee
        </mat-label>
          <mat-select [value]="audit.auditee" [compareWith]="byTeamId" formControlName="auditee">
            <mat-option *ngFor="let team of teams" [value]="team">
              {{team.teamName}}
            </mat-option>
          </mat-select>
        </mat-form-field>
        <span *ngIf="(editAuditForm.controls.auditee.dirty || editAuditForm.controls.auditee.touched)">
          <span *ngIf="editAuditForm.controls.auditee.errors?.required">
            Auditee Required!
          </span>
        </span>
        <span style="display: flex; justify-content: space-between; width: 100%">
          <mat-form-field appearance="outline" style="width: 450px">
          <mat-label>
            Auditor
          </mat-label>
          <mat-select formControlName="auditors">
            <mat-option *ngFor="let team of teams" [value]="team">
              {{team.teamName}}
            </mat-option>
          </mat-select>
        </mat-form-field>
          <button mat-flat-button color="primary" style="width: 100px; height: 45px" (click)="addAuditor()">
            Add Auditor
          </button>
        </span>
        <span *ngIf="addAuditorError" style="color: red">
          {{addAuditorError}}
        </span>
      </span>
      <span style="display: flex; flex-direction: column">
        <mat-card *ngFor="let auditor of audit.auditors"
                  style="display: flex; justify-content: space-between; width: 300px; margin-bottom: 15px;">
          <mat-card-content>{{auditor.teamName | titlecase}}</mat-card-content>
          <button mat-flat-button color="primary" (click)="removeAuditor(auditor)">
            Remove
          </button>
        </mat-card>
      </span>
      <mat-form-field appearance="outline">
        <mat-label>
          Audit Start Date
        </mat-label>
        <input matInput [matDatepicker]="picker" formControlName="auditStartDate" value="{{audit.auditStartDate}}">
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>
       <span *ngIf="(editAuditForm.controls.auditStartDate.dirty || editAuditForm.controls.auditStartDate.touched)">
          <span *ngIf="editAuditForm.controls.auditStartDate.errors?.required">
            Audit Start Date Required!
          </span>
        </span>
      <button mat-flat-button (click)="updateAudit()" color="primary">
        Update
      </button>
      <h3>Memos</h3>
      <hr/>


    </form>
  </span>
</ng-container>
